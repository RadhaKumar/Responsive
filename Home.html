<!DOCTYPE html>
<html>
<head>
<title>Bootstrap Example</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script>
window.onload = function () {
	
}

$(document).ready(function(){
    $.get("http://api.jsonbin.io/b/5b893aa03ffac56f4bd7905a", function(data, status){
    	$.each( data["data"], function( key, value ) {
    		$('#DataTable > tbody:last-child').append('<tr><td>'+value["change"]+'</td><td>'+value["position"]+'</td><td>'+value["keyword"]+'</td></tr>');
		  	//alert( value["change"]+" "+value["position"]+" "+value["keyword"] );
		});
        //alert("Data: " + data + "\nStatus: " + status);
    });
    $.get("http://api.jsonbin.io/b/5b893b00db948c68635a04eb", function(data, status){
    	var chart = new CanvasJS.Chart("chartContainer", {
			animationEnabled: true,  
			title:{
				text: "Keyword Ranks"
			},
			data: 
			[
				{
					name: "keyword 1",
					showInLegend: true,
					yValueFormatString: "#",
					xValueFormatString: "YYYY-MM-DD",
					type: "spline",
					dataPoints: [
						{x: new Date(2018, 10, 13), y: data["keyword 1"]["points"][0]},
						{x: new Date(2018, 10, 14), y: data["keyword 1"]["points"][1]},
						{x: new Date(2018, 10, 15), y: data["keyword 1"]["points"][2]},
						{x: new Date(2018, 10, 16), y: data["keyword 1"]["points"][3]},
						{x: new Date(2018, 10, 17), y: data["keyword 1"]["points"][4]},
						{x: new Date(2018, 10, 18), y: data["keyword 1"]["points"][5]},
						{x: new Date(2018, 10, 19), y: data["keyword 1"]["points"][6]}
					]
				},
				{
					name: "keyword 2",
					showInLegend: true,
					yValueFormatString: "#",
					xValueFormatString: "YYYY-MM-DD",
					type: "spline",
					dataPoints: [
						{x: new Date(2018, 10, 13), y: data["keyword 2"]["points"][0]},
						{x: new Date(2018, 10, 14), y: data["keyword 2"]["points"][1]},
						{x: new Date(2018, 10, 15), y: data["keyword 2"]["points"][2]},
						{x: new Date(2018, 10, 16), y: data["keyword 2"]["points"][3]},
						{x: new Date(2018, 10, 17), y: data["keyword 2"]["points"][4]},
						{x: new Date(2018, 10, 18), y: data["keyword 2"]["points"][5]},
						{x: new Date(2018, 10, 19), y: data["keyword 2"]["points"][6]}
					]
				},
				{
					name: "keyword 3",
					showInLegend: true,
					yValueFormatString: "#",
					xValueFormatString: "YYYY-MM-DD",
					type: "spline",
					dataPoints: [
						{x: new Date(2018, 10, 13), y: data["keyword 3"]["points"][0]},
						{x: new Date(2018, 10, 14), y: data["keyword 3"]["points"][1]},
						{x: new Date(2018, 10, 15), y: data["keyword 3"]["points"][2]},
						{x: new Date(2018, 10, 16), y: data["keyword 3"]["points"][3]},
						{x: new Date(2018, 10, 17), y: data["keyword 3"]["points"][4]},
						{x: new Date(2018, 10, 18), y: data["keyword 3"]["points"][5]},
						{x: new Date(2018, 10, 19), y: data["keyword 3"]["points"][6]}
					]
				},
				{
					name: "keyword 4",
					showInLegend: true,
					yValueFormatString: "#",
					xValueFormatString: "YYYY-MM-DD",
					type: "spline",
					dataPoints: [
						{x: new Date(2018, 10, 13), y: data["keyword 4"]["points"][0]},
						{x: new Date(2018, 10, 14), y: data["keyword 4"]["points"][1]},
						{x: new Date(2018, 10, 15), y: data["keyword 4"]["points"][2]},
						{x: new Date(2018, 10, 16), y: data["keyword 4"]["points"][3]},
						{x: new Date(2018, 10, 17), y: data["keyword 4"]["points"][4]},
						{x: new Date(2018, 10, 18), y: data["keyword 4"]["points"][5]},
						{x: new Date(2018, 10, 19), y: data["keyword 4"]["points"][6]}
					]
				},
				{
					name: "keyword 5",
					showInLegend: true,
					yValueFormatString: "#",
					xValueFormatString: "YYYY-MM-DD",
					type: "spline",
					dataPoints: [
						{x: new Date(2018, 10, 13), y: data["keyword 5"]["points"][0]},
						{x: new Date(2018, 10, 14), y: data["keyword 5"]["points"][1]},
						{x: new Date(2018, 10, 15), y: data["keyword 5"]["points"][2]},
						{x: new Date(2018, 10, 16), y: data["keyword 5"]["points"][3]},
						{x: new Date(2018, 10, 17), y: data["keyword 5"]["points"][4]},
						{x: new Date(2018, 10, 18), y: data["keyword 5"]["points"][5]},
						{x: new Date(2018, 10, 19), y: data["keyword 5"]["points"][6]}
					]
				}
			]
		});
		chart.render();
		//alert(data["keyword 1"]["points"]);
    });
});
</script>
</head>
<body>
<div id="chartContainer" style="height: 10%; width: 100%;"></div>
<div class="table-responsive">
	<table id="DataTable" class="table">
	  <tbody>
	    <tr>
	    	<th>Change</th>
	    	<th>Position</th>
	    	<th>Keyword</th>
	    </tr>
	  </tbody>
	</table>
</div>
</body>
</html>
